{"version":3,"file":"static/js/880.efd1d2ef.chunk.js","mappings":"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","sources":["components/backButton/backButton.tsx","features/formatDate.ts","features/getDateFromIsoString.ts","components/historyList/historyList.tsx","pages/history.tsx"],"sourcesContent":["import React from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport './backButton.css'\r\n\r\nexport const BackButton = () => {\r\n    const navigate = useNavigate()\r\n    return (\r\n        <div className='backButton__wrapper'>\r\n            <button\r\n                className='button backButton'\r\n                onClick={() => navigate(-1)}\r\n            >\r\n                GO BACK\r\n            </button>\r\n        </div>\r\n    )\r\n}\r\n","export const formatDate = (date: string) => {\r\n    const formatDate = new Date(date)\r\n    const result = `${formatDate.getFullYear()}-${formatDate.getMonth()}-${formatDate.getDay()}`\r\n    return Date.parse(result)\r\n}\r\n","export const getDateFromIsoString = (isoDate: string, isTimeShown = false) => {\r\n    const date = new Date(isoDate)\r\n    const resultDate =\r\n        date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear()\r\n\r\n    const resultDateWithTime =\r\n        resultDate +\r\n        ' ' +\r\n        date.getHours() +\r\n        ':' +\r\n        date.getMinutes() +\r\n        ':' +\r\n        date.getSeconds()\r\n\r\n    return isTimeShown ? resultDateWithTime : resultDate\r\n}\r\n","import {\r\n    useGetUserHistoryQuery,\r\n    useLazyDeleteUserHistoryQuery,\r\n    useLazyGetUserHistoryQuery,\r\n} from '../../api/firestoreApi'\r\nimport { useAuthorization } from '../../store/hooks'\r\nimport { Loader } from '../loader/loader'\r\nimport { formatDate } from '../../features/formatDate'\r\nimport { IHistory } from '../../types/firestoreApiTypes'\r\nimport { getDateFromIsoString } from '../../features/getDateFromIsoString'\r\nimport { BackButton } from '../backButton/backButton'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport React from 'react'\r\nimport './historyList.css'\r\n\r\ninterface IDateObj {\r\n    [key: string]: IHistory[]\r\n}\r\n\r\nfunction HistoryList() {\r\n    const { email } = useAuthorization()\r\n    const { data, isSuccess, isLoading, isFetching, error, isError } =\r\n        useGetUserHistoryQuery({\r\n            email: email,\r\n        })\r\n    const [triggerUpdateHistory] = useLazyGetUserHistoryQuery()\r\n    const navigate = useNavigate()\r\n    const [triggerDeleteHistory] = useLazyDeleteUserHistoryQuery()\r\n\r\n    const curDate = formatDate(new Date().toISOString())\r\n\r\n    let content\r\n    if (isFetching || isLoading) {\r\n        content = <Loader />\r\n    } else if (isSuccess && !data.history.length) {\r\n        content = 'Nothing was found'\r\n    } else if (isSuccess) {\r\n        const dateObj: IDateObj = {}\r\n        data.history.forEach(e => {\r\n            const dateKey = formatDate(e.date)\r\n            if (dateObj[dateKey]) {\r\n                dateObj[dateKey].push(e)\r\n            } else {\r\n                dateObj[dateKey] = [e]\r\n            }\r\n        })\r\n        content = Object.values(dateObj)\r\n            .reverse()\r\n            .map((e, index) => (\r\n                <div key={e[0].date + index}>\r\n                    <h2>\r\n                        {formatDate(e[0].date) === curDate\r\n                            ? 'Today'\r\n                            : getDateFromIsoString(e[0].date)}\r\n                    </h2>\r\n                    <div className='historyList__wrapper'>\r\n                        {e.reverse().map((e, ind) => (\r\n                            <div\r\n                                key={ind}\r\n                                className='histotyList__item'\r\n                                onClick={() => {\r\n                                    navigate({\r\n                                        pathname: '/',\r\n                                        search: `?search=${e.searchReq}&page=1`,\r\n                                    })\r\n                                }}\r\n                            >\r\n                                <div className='histotyList__name'>\r\n                                    {e.searchReq}\r\n                                </div>\r\n                                <div className='histotyList__date'>\r\n                                    {getDateFromIsoString(e.date, true)}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            ))\r\n    } else if (isError) {\r\n        content = <div>{String(error)}</div>\r\n    }\r\n\r\n    return (\r\n        <div className='histotyList'>\r\n            <div className='historyList__actionbar'>\r\n                <button\r\n                    onClick={async () => {\r\n                        await triggerDeleteHistory({ email: email })\r\n                        await triggerUpdateHistory({ email: email })\r\n                    }}\r\n                    className='historyList__button button'\r\n                >\r\n                    Clear history\r\n                </button>\r\n                <div className='historyList__backButton'>\r\n                    <BackButton />\r\n                </div>\r\n            </div>\r\n            <div className='historyList__container'>{content}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport { HistoryList }\r\n","import { HistoryList } from '../components/historyList/historyList'\r\nimport React from 'react'\r\n\r\nfunction History() {\r\n    return <HistoryList />\r\n}\r\n\r\nexport { History as default }\r\n"],"names":["BackButton","navigate","useNavigate","_jsx","className","children","onClick","formatDate","date","Date","result","concat","getFullYear","getMonth","getDay","parse","getDateFromIsoString","isoDate","isTimeShown","arguments","length","undefined","resultDate","getDate","resultDateWithTime","getHours","getMinutes","getSeconds","HistoryList","content","email","useAuthorization","_useGetUserHistoryQue","useGetUserHistoryQuery","data","isSuccess","isLoading","isFetching","error","isError","_useLazyGetUserHistor","useLazyGetUserHistoryQuery","triggerUpdateHistory","_slicedToArray","_useLazyDeleteUserHis","useLazyDeleteUserHistoryQuery","triggerDeleteHistory","curDate","toISOString","Loader","history","dateObj","forEach","e","dateKey","push","Object","values","reverse","map","index","_jsxs","ind","pathname","search","searchReq","String","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","stop","History"],"sourceRoot":""}