"use strict";(self.webpackChunkastonreact=self.webpackChunkastonreact||[]).push([[448],{1046:function(e,n,a){a.d(n,{U:function(){return s}});var s=function(){var e=new Date;return e.getDate()+"/"+(e.getMonth()+1)+"/"+e.getFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},448:function(e,n,a){a.r(n),a.d(n,{default:function(){return N}});var s=a(9439),t=a(4165),r=a(5861),i=a(2791),c=a(184);function o(e){var n=e.onChangeHandler,a=e.onFocusHandler,s=e.gameName,t=e.onKeyDownEvent;return(0,c.jsx)("input",{className:"search__input",type:"text",placeholder:"Enter game name",name:"search",value:s,onChange:function(e){return n(e.target.value)},onFocus:function(){return a(!0)},onBlur:function(){return a(!1)},onKeyDown:function(e){"Enter"===e.key&&t()}})}var l=a(5108),u=a(7689);function d(e){var n,a=e.pages,s=e.size,t=e.name,r=e.isInputFocused,i=(0,u.s0)(),o=(0,l.rt)({pageNumber:a,pageSize:s,gameName:t}),d=o.data,m=o.isLoading,g=o.isFetching,h=o.isSuccess,f=o.isError,x=o.error;return m||g?n="LOADING":!h||null!==d&&void 0!==d&&d.count?h?n=d.results.map((function(e){return(0,c.jsxs)("div",{className:"search__item",onClick:function(){return i("/Game/".concat(e.id))},children:[(0,c.jsx)("img",{className:"search__img",src:e.background_image,alt:e.name}),(0,c.jsx)("h2",{children:e.name}),(0,c.jsx)("span",{children:e.released})]},e.id)})):f&&(n=(0,c.jsx)("div",{children:x.toString()})):n="Nothing has found",(0,c.jsx)("div",{className:t&&r?"search__list":"search__list search__list_hidden",children:n})}var m=a(1046),g=a(6579),h=a(4531);function f(e){var n=e.onClickHandler,a=e.onClickPageReset,l=(0,g.o9)().email,u=(0,h.ky)(),f=(0,s.Z)(u,1)[0],x=(0,h.aT)(),p=(0,s.Z)(x,1)[0],v=(0,i.useState)(""),_=(0,s.Z)(v,2),j=_[0],N=_[1],k=(0,i.useState)(!1),b=(0,s.Z)(k,2),C=b[0],S=b[1],L=(0,g.Nr)(j,800),Z=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(j),a(1),N(""),!j){e.next=8;break}return e.next=6,f({email:l,name:j,date:(0,m.U)()});case 6:return e.next=8,p({email:l});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{className:"search",children:[(0,c.jsx)(o,{onChangeHandler:N,onFocusHandler:S,gameName:j,onKeyDownEvent:Z}),(0,c.jsx)("button",{className:"search__button",onClick:Z,children:"Search"}),(0,c.jsx)(d,{pages:1,size:5,name:L,isInputFocused:C})]})}var x=a(3331),p=a(1087);function v(e){var n,a=e.size,t=e.isLastPageSetter,r=(0,p.lr)(),o=(0,s.Z)(r,1)[0],d=(0,u.s0)(),m=(0,l.rt)({pageNumber:Number(o.get("page"))||1,pageSize:a,gameName:o.get("search")||""}),g=m.data,h=m.isLoading,f=m.isFetching,v=m.isSuccess,_=m.isError,j=m.error;return(0,i.useEffect)((function(){g&&t(Boolean(!g.next))}),[g]),h||f?n=(0,c.jsx)(x.a,{}):!v||null!==g&&void 0!==g&&g.count?v?n=g.results.map((function(e){return(0,c.jsxs)("div",{className:"allGamesList__item",onClick:function(){return d("/Game/".concat(e.id))},children:[(0,c.jsx)("img",{className:"allGamesList__img",src:e.background_image,alt:e.name}),(0,c.jsx)("h2",{className:"allGamesList__name",children:e.name}),(0,c.jsxs)("div",{className:"allGamesList__rating",children:["Rating: ",e.rating," / 5"]}),(0,c.jsxs)("span",{className:"allGamesList__date",children:["Released: ",e.released]})]},e.id)})):_&&(n=(0,c.jsx)("div",{children:j.toString()})):n="Nothing has found",(0,c.jsx)("div",{className:"allGamesList",children:n})}function _(e){var n=e.page,a=e.onClickHandler,s=e.isLastPage,t=function(){window.scrollTo({top:0})};return(0,c.jsxs)("div",{className:"pageControlls",children:[(0,c.jsx)("button",{disabled:n<=1,onClick:function(){a(n-1),t()},className:"pageControlls_button",children:"previous"}),(0,c.jsx)("button",{disabled:n<=1,onClick:function(){a(1),t()},className:"pageControlls_button",children:"back to 1"}),(0,c.jsx)("button",{disabled:s,onClick:function(){a(n+1),t()},className:"pageControlls_button",children:"next"})]})}var j=a(4671);function N(){var e=(0,g.o9)().isAuth,n=(0,p.lr)(),a=(0,s.Z)(n,2),t=a[0],r=a[1],o=(0,i.useState)(t.get("search")||""),l=(0,s.Z)(o,2),d=l[0],m=l[1],h=(0,i.useState)(Number(t.get("page"))||1),x=(0,s.Z)(h,2),N=x[0],k=x[1],b=(0,i.useState)(!0),C=(0,s.Z)(b,2),S=C[0],L=C[1],Z=(0,i.useContext)(j.Q).lightTheme;return(0,i.useEffect)((function(){r((function(e){return e.set("search",d),e.set("page",String(N)),e}))}),[d,N]),e?(0,c.jsxs)("div",{className:Z?"home":"home _black",children:[(0,c.jsx)(f,{onClickHandler:m,onClickPageReset:k}),(0,c.jsxs)("h1",{children:["Search: ",d]}),(0,c.jsx)(v,{size:21,isLastPageSetter:L}),(0,c.jsx)(_,{page:N,onClickHandler:k,isLastPage:S})]}):(0,c.jsx)(u.Fg,{to:"/SignIn"})}}}]);
//# sourceMappingURL=448.6b5f6bc3.chunk.js.map